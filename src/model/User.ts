/* eslint-disable @typescript-eslint/no-explicit-any */
// To parse this data:
//
//   import { Convert, User } from "./file";
//
//   const user = Convert.toUser(json);
//
// These functions will throw an error if the JSON doesn't
// match the expected interface, even if the JSON is valid.

import UserRole from '@/utils/UserRole'

import { cast, uncast, o, u, r, a } from '@/model/Converter'

export interface User {
    _id: string
    email: string
    authId: string
    name: string
    rating: number
    useGooglePhoto: boolean
    profilePhotoKey: string
    profilePhotoURL: string
    roles: UserRole[]
    blocked: boolean
}

const typeMap: any = {
    User: o(
        [
            { json: '_id', js: '_id', typ: '' },
            { json: 'email', js: 'email', typ: '' },
            { json: 'authId', js: 'authId', typ: '' },
            { json: 'name', js: 'name', typ: '' },
            { json: 'rating', js: 'rating', typ: 0 },
            { json: 'useGooglePhoto', js: 'useGooglePhoto', typ: true },
            {
                json: 'profilePhotoKey',
                js: 'profilePhotoKey',
                typ: u(undefined, ''),
            },
            {
                json: 'profilePhotoURL',
                js: 'profilePhotoURL',
                typ: u(undefined, ''),
            },
            { json: 'roles', js: 'roles', typ: a('') },
            { json: 'blocked', js: 'blocked', typ: true },
        ],
        0
    ),
}

// Converts JSON strings to/from your types
// and asserts the results of JSON.parse at runtime
export class Convert {
    public static toUser(json: string): User {
        return cast(JSON.parse(json), r('User'), typeMap)
    }

    public static userToJson(value: User): string {
        return JSON.stringify(uncast(value, r('User'), typeMap), null, 2)
    }
}
